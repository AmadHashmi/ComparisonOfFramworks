<!-- create-task.component.html -->

<div class="create-task-container">
  <mat-card>
    <mat-card-title>Create Task</mat-card-title>
    <mat-card-content>
      <form [formGroup]="taskForm" (keydown.enter)="$event.preventDefault()">
        <mat-form-field class="full-width">
          <input matInput placeholder="Title" formControlName="title" />
          <mat-error *ngIf="taskForm.get('title')!.hasError('required')"
            >Title is required</mat-error
          >
        </mat-form-field>

        <mat-form-field class="full-width">
          <textarea
            matInput
            placeholder="Description"
            formControlName="description"
          ></textarea>
          <mat-error *ngIf="taskForm.get('description')!.hasError('required')"
            >Description is required</mat-error
          >
        </mat-form-field>
        <mat-form-field class="full-width">
          <input
            matInput
            placeholder="Add a step"
            formControlName="newSubTask"
            (keydown)="addSubtaskOnEnter($event)"
          />
        </mat-form-field>

        <mat-chip-listbox class="mat-mdc-chip-set-stacked">
          <mat-chip-option *ngFor="let subtask of subTasks; let i = index">
            {{ subtask.value }}
            <mat-icon matChipRemove (click)="removeSubtask(i)"></mat-icon>
          </mat-chip-option>
        </mat-chip-listbox>

        <button
          type="button"
          mat-raised-button
          color="success"
          (click)="addSubTask()"
        >
          Add Steps
        </button>
        <button
          [hidden]="updateTask"
          type="submit"
          (click)="createTask()"
          mat-raised-button
          color="primary"
        >
          Create Task
        </button>

        <button
          *ngIf="updateTask"
          type="submit"
          (click)="createTask()"
          mat-raised-button
          color="primary"
        >
          Update Task
        </button>
      </form>
    </mat-card-content>
  </mat-card>
</div>
